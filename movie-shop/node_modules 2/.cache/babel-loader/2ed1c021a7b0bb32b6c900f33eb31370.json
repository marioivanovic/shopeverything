{"ast":null,"code":"var _jsxFileName = \"/Users/marioivanovic/Desktop/CDA_java_Aulnay/week_2/back/projet_ecommerce/online-shop/movie-shop/src/components/pages/login/login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport Button from \"../../atoms/Button/button\";\nimport Input from \"../../atoms/Input/input\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport renderNotification from \"../../../utils/notification\";\nimport api from \"../../../utils/api\";\nimport logo from \"../../../assets/logos/ANF_logo_couleur.svg\";\nimport \"./_login.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  const appState = useSelector(state => state.auth);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const inputEmail = useRef(null);\n  const inputPassword = useRef(null);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const [open, setOpen] = useState(false);\n  useEffect(() => {\n    dispatch({\n      type: \"USER_RESET\"\n    });\n  }, [dispatch]);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      dispatch({\n        type: \"USER_FETCH\"\n      });\n      let result = await api.post(\"/login\", {\n        email: email,\n        password: password\n      });\n      dispatch({\n        type: \"USER_FETCH_SUCCESS\"\n      });\n      setOpen(true);\n      dispatch({\n        type: \"USER_SET\",\n        payload: result.data.data\n      });\n      history.push(\"/\");\n    } catch (err) {\n      dispatch({\n        type: \"USER_FETCH_WRONG\",\n        payload: err\n      });\n      setOpen(true);\n    }\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const goToResetPassword = () => {\n    history.push(\"/forget/password\");\n  };\n\n  const handleSetEmail = () => {\n    setEmail(inputEmail.current.value);\n  };\n\n  const handleSetPassword = () => {\n    setPassword(inputPassword.current.value);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [open && !appState.user.isSuccess ? renderNotification(400, \"Erreur\", appState.user.values.response.data.message.message, handleClose) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container_login\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"box_form\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          autoComplete: \"off\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: logo,\n            alt: \"logo\",\n            className: \"logo_anf\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"sub_title\",\n            children: \"Connectez-vous avec votre compte adh\\xE9rent.e de l'Alliance pour une Nouvelle France\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            reference: inputEmail,\n            customClass: \"input\",\n            height: \"40px\",\n            width: \"90%\",\n            type: \"email\",\n            id: \"email\",\n            name: \"email\",\n            placeholder: \"Email\",\n            onChangeMethod: handleSetEmail\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            reference: inputPassword,\n            customClass: \"input mb-2\",\n            height: \"40px\",\n            width: \"90%\",\n            type: \"password\",\n            id: \"password\",\n            name: \"password\",\n            placeholder: \"Mot de passe\",\n            onChangeMethod: handleSetPassword\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"reset_password\",\n            onClick: goToResetPassword,\n            children: \"Mot de passe oubli\\xE9 ? Cliquez ici\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            label: \"ME CONNECTER\",\n            height: \"50px\",\n            width: \"90%\",\n            type: \"submit\",\n            customClass: \"btn basic-light-color primary-dark-background\",\n            onClickMethod: handleSubmit\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Login, \"tcP+BqQ64hHTSoppx4kuDg6JsLk=\", false, function () {\n  return [useSelector, useDispatch, useHistory];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/marioivanovic/Desktop/CDA_java_Aulnay/week_2/back/projet_ecommerce/online-shop/movie-shop/src/components/pages/login/login.js"],"names":["React","useState","useEffect","useRef","Button","Input","useDispatch","useSelector","useHistory","renderNotification","api","logo","Login","appState","state","auth","email","setEmail","password","setPassword","inputEmail","inputPassword","dispatch","history","open","setOpen","type","handleSubmit","e","preventDefault","result","post","payload","data","push","err","handleClose","goToResetPassword","handleSetEmail","current","value","handleSetPassword","user","isSuccess","values","response","message"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport Button from \"../../atoms/Button/button\";\nimport Input from \"../../atoms/Input/input\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\n\nimport renderNotification from \"../../../utils/notification\";\n\nimport api from \"../../../utils/api\";\nimport logo from \"../../../assets/logos/ANF_logo_couleur.svg\";\n\nimport \"./_login.scss\";\n\nconst Login = () => {\n  const appState = useSelector((state) => state.auth);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const inputEmail = useRef(null);\n  const inputPassword = useRef(null);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const [open, setOpen] = useState(false);\n\n  useEffect(() => {\n    dispatch({ type: \"USER_RESET\" });\n  }, [dispatch]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      dispatch({ type: \"USER_FETCH\" });\n      let result = await api.post(\"/login\", {\n        email: email,\n        password: password,\n      });\n      dispatch({ type: \"USER_FETCH_SUCCESS\" });\n      setOpen(true);\n      dispatch({ type: \"USER_SET\", payload: result.data.data });\n      history.push(\"/\");\n    } catch (err) {\n      dispatch({\n        type: \"USER_FETCH_WRONG\",\n        payload: err,\n      });\n      setOpen(true);\n    }\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const goToResetPassword = () => {\n    history.push(\"/forget/password\");\n  };\n\n  const handleSetEmail = () => {\n    setEmail(inputEmail.current.value);\n  };\n\n  const handleSetPassword = () => {\n    setPassword(inputPassword.current.value);\n  };\n\n  return (\n    <>\n      {open && !appState.user.isSuccess\n        ? renderNotification(\n            400,\n            \"Erreur\",\n            appState.user.values.response.data.message.message,\n            handleClose\n          )\n        : null}\n      <div className=\"container_login\">\n        <div className=\"box_form\">\n          <form autoComplete=\"off\">\n            <img src={logo} alt=\"logo\" className=\"logo_anf\" />\n            <h1 className=\"sub_title\">\n              Connectez-vous avec votre compte adhérent.e de l'Alliance pour une\n              Nouvelle France\n            </h1>\n            <Input\n              reference={inputEmail}\n              customClass={\"input\"}\n              height={\"40px\"}\n              width={\"90%\"}\n              type={\"email\"}\n              id={\"email\"}\n              name={\"email\"}\n              placeholder={\"Email\"}\n              onChangeMethod={handleSetEmail}\n            />\n            <Input\n              reference={inputPassword}\n              customClass={\"input mb-2\"}\n              height={\"40px\"}\n              width={\"90%\"}\n              type={\"password\"}\n              id={\"password\"}\n              name={\"password\"}\n              placeholder={\"Mot de passe\"}\n              onChangeMethod={handleSetPassword}\n            />\n            <span className=\"reset_password\" onClick={goToResetPassword}>\n              Mot de passe oublié ? Cliquez ici\n            </span>\n            <Button\n              label={\"ME CONNECTER\"}\n              height={\"50px\"}\n              width={\"90%\"}\n              type={\"submit\"}\n              customClass={\"btn basic-light-color primary-dark-background\"}\n              onClickMethod={handleSubmit}\n            />\n          </form>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}