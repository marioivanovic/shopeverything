{"ast":null,"code":"import * as _ from 'underscore';\nimport { LabelType } from '@angular-slider/ngx-slider';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/plant.service\";\nimport * as i2 from \"../../components/filter-side-bar/filter-side-bar.component\";\nimport * as i3 from \"../../components/searchbar/searchbar.component\";\nimport * as i4 from \"@angular-slider/ngx-slider\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../../components/card-plant/card-plant.component\";\n\nfunction PageAccueilComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵelement(1, \"app-card-plant\", 12);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const product_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"plant\", product_r1);\n  }\n}\n\nexport let PageAccueilComponent = /*#__PURE__*/(() => {\n  class PageAccueilComponent {\n    constructor(shopService) {\n      this.shopService = shopService;\n      this.min = 30;\n      this.max = 120;\n      this.options = {\n        floor: 0,\n        ceil: 150,\n        translate: (value, label) => {\n          switch (label) {\n            case LabelType.Low:\n              return value + '€';\n\n            case LabelType.High:\n              return value + '€';\n\n            default:\n              return value + '€';\n          }\n        }\n      };\n      this.subListProduct = this.shopService.subjectListProduct$.subscribe(response => {\n        console.log('here', response);\n        this.data = response;\n        this.listCategories = _.uniq(this.data.map(x => x.product_breadcrumb_label));\n        console.log(this.listCategories);\n        response.length = 40; // juste pour le dev dans notre contexte d'apprentissage\n\n        this.listProduct = [...response];\n      });\n      this.shopService.getListProductsChaud();\n    }\n\n    ngOnInit() {} // methode de cycle de vie de mon composant qui est executée juste avant que l'instance de mon composant soit détruite\n\n\n    ngOnDestroy() {\n      this.subListProduct.unsubscribe();\n    }\n\n    addItem(term) {\n      console.log(term);\n      this.shopService.subjectListProduct$.subscribe(products => {\n        if (term.trim() != '') {\n          this.listProduct = products.filter(product => {\n            return product.product_name.toLowerCase().indexOf(term.toLowerCase()) > -1;\n          });\n        } else {\n          this.listProduct = products;\n        }\n      });\n      this.shopService.getListProductsChaud();\n    }\n\n    displayItem($event) {\n      this.shopService.subjectListProduct$.subscribe(listProduct => {\n        this.listProduct = listProduct.filter(product => {\n          return product.product_unitprice_ati >= $event.value && product.product_unitprice_ati <= $event.highValue;\n        });\n        console.log('yoo');\n        console.log(listProduct);\n      });\n      this.shopService.getListProductsChaud();\n    }\n\n  }\n\n  PageAccueilComponent.ɵfac = function PageAccueilComponent_Factory(t) {\n    return new (t || PageAccueilComponent)(i0.ɵɵdirectiveInject(i1.ShopService));\n  };\n\n  PageAccueilComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PageAccueilComponent,\n    selectors: [[\"app-page-accueil\"]],\n    decls: 17,\n    vars: 5,\n    consts: [[1, \"d-flex\", \"align-items-stretch\"], [3, \"listCategoriesFilter\"], [1, \"custom-main\", \"container\", \"p-3\"], [1, \"custom-search\"], [1, \"bar\", 3, \"searchEvent\"], [1, \"py-3\"], [1, \"btn\", \"btn-outline-success\", \"btn-sm\", \"me-2\"], [1, \"custom-slider\"], [3, \"value\", \"highValue\", \"options\", \"valueChange\", \"highValueChange\", \"userChangeEnd\"], [1, \"row\", \"row-cols-1\", \"row-cols-sm-1\", \"row-cols-md-2\", \"row-cols-xl-3\", \"g-4\"], [\"class\", \"col\", 4, \"ngFor\", \"ngForOf\"], [1, \"col\"], [3, \"plant\"]],\n    template: function PageAccueilComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"app-filter-side-bar\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"app-searchbar\", 4);\n        i0.ɵɵlistener(\"searchEvent\", function PageAccueilComponent_Template_app_searchbar_searchEvent_4_listener($event) {\n          return ctx.addItem($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 5);\n        i0.ɵɵtext(6, \" Trier par : \");\n        i0.ɵɵelementStart(7, \"button\", 6);\n        i0.ɵɵtext(8, \"Prix\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"button\", 6);\n        i0.ɵɵtext(10, \"Ordre Alpha\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"button\", 6);\n        i0.ɵɵtext(12, \"Avis\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\", 7);\n        i0.ɵɵelementStart(14, \"ngx-slider\", 8);\n        i0.ɵɵlistener(\"valueChange\", function PageAccueilComponent_Template_ngx_slider_valueChange_14_listener($event) {\n          return ctx.min = $event;\n        })(\"highValueChange\", function PageAccueilComponent_Template_ngx_slider_highValueChange_14_listener($event) {\n          return ctx.max = $event;\n        })(\"userChangeEnd\", function PageAccueilComponent_Template_ngx_slider_userChangeEnd_14_listener($event) {\n          return ctx.displayItem($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"div\", 9);\n        i0.ɵɵtemplate(16, PageAccueilComponent_div_16_Template, 2, 1, \"div\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"listCategoriesFilter\", ctx.listCategories);\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"value\", ctx.min)(\"highValue\", ctx.max)(\"options\", ctx.options);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.listProduct);\n      }\n    },\n    directives: [i2.FilterSideBarComponent, i3.SearchbarComponent, i4.ɵa, i5.NgForOf, i6.CardPlantComponent],\n    styles: [\".custom-main[_ngcontent-%COMP%]{min-height:calc(100vh - 54px)}\"]\n  });\n  return PageAccueilComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}
